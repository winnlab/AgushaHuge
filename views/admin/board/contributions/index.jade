extends ../layout

block append header
    link(href="/css/admin/common/contribution.css" rel="stylesheet" type="text/css")

block append scripts    
    script(src="/js/admin/common/contribution.js")


block content
    .box
        .box-header
            h3.box-title= "Статьи энциклопедии"
        .box-header
            .panel-primary
                .panel-body
                    a(href="contributions/create")
                        button.btn.btn-primary= "Создать новую статью"
        .box-header.cont-filter
            .col-md-4.white
                | Фильтр:
            .col-md-8
                select.t-years
                    option(value="-1")= "Все возраста"
                    each item in years
                        option(value=item._id)= item.name
                select.t-theme
                    option(value="-1")= "Все темы"
                    each item in themes
                        option(value=item._id)= item.name
                select.t-author
                    option(value="-1")= "Все авторы"
                    each item in authors
                        option(value=item._id)= item.name
                select.t-sort
                    option(value="-1")= "Сортировка"
                    option(value="0")= "Просмотры (max -> min)"
                    option(value="1")= "Просмотры (max <- min)"
                    option(value="2")= "Лайки (max -> min)"
                    option(value="3")= "Лайки (max <- min)"
                    option(value="4")= "Комментарии (max -> min)"
                    option(value="5")= "Комментарии (max <- min)"

        .box-body.table-responsive
            table.table.table-bordered.table-striped#dtable
                thead
                    tr
                        th= "Название"
                        th= "Автор"
                        th= "Активен?"
                        th= "Рекомендован?"
                        th= "Возраста"
                        th= "Темы"
                        th= "Действия"
                tbody
                    each item in contributions
                        tr
                            td= item.title
                            td= item.authorName
                            td= (item.active?"Да":"Нет")
                            td= (item.recommended?"Да":"Нет")
                            td= (item.years?item.years.name:"{удалено}")
                            td= (item.theme?item.theme.name:"{удалено}")
                            td
                                div.col-md-6
                                    a(href="contributions/edit/#{item._id}")
                                        button.btn.btn-warning(type="button")
                                            i.glyphicon.glyphicon-edit
                                            span= " Редактировать"
                                div.col-md-6
                                    a(href="contributions/delete/#{item._id}")
                                        button.btn.btn-danger(type="button")
                                            i.glyphicon.glyphicon-remove-circle
                                            span= " Удалить"